{
  "hooks": {
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx -y dude-claude-plugin auto-retrieve",
            "timeout": 60
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "Plan",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A plan has been created. Review it and output JSON to save it as a project spec: {\"action\":\"upsert\",\"kind\":\"spec\",\"title\":\"<plan title>\",\"body\":\"<full plan details including steps>\",\"status\":\"open\"}. Output ONLY the JSON, no other text.",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "npx -y dude-claude-plugin auto-persist-plan",
            "timeout": 60
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Review the conversation. If a bug was fixed, output JSON: {\"action\":\"upsert\",\"kind\":\"issue\",\"title\":\"...\",\"body\":\"...\",\"status\":\"resolved\"}. If a feature or improvement was made (including completing a plan), output JSON: {\"action\":\"upsert\",\"kind\":\"spec\",\"title\":\"...\",\"body\":\"<summary of what was implemented>\",\"status\":\"resolved\"}. If a plan was created but not yet implemented, output {\"action\":\"none\"}. If neither applies, output {\"action\":\"none\"}. Output ONLY the JSON, no other text.",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "npx -y dude-claude-plugin auto-persist",
            "timeout": 60
          }
        ]
      }
    ]
  }
}
